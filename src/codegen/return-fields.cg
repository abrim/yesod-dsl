    return $ object [ 
            "result" .= map (\~{intercalate " " params} -> object [
~{intercalate ",\n" fields}
            ]) result,
            "totalCount" .= (T.pack $ (\(Database.Esqueleto.Value v) -> show v) (head (count)))
        ]
