import "module.dbdef";

document AudioFile {
    file File;
}

document VideoFile {
    file File;

}
interface Playable {
}
document AudioPlayable {
    implements Versioned;
    implements Named;
    implements Playable;
    audioFiles [AudioFile];
}
document VideoPlayable {
    implements Versioned;
    implements Named;
    implements Playable;
    videoFiles [VideoFile];
}
document User {
    implements Versioned;
    implements Named;


    files [ref File];

    unique asc index name;
}

document File {
    implements Versioned;
    implements Named;

    contents Maybe Text;
}
interface Named {
    name Text check nonempty;
}
interface Versioned {
    version Maybe Int64;
    changes [ChangeRecord];
    desc index changes.time;
}

document ChangeRecord {
    field    Text;
    oldValue Text;
    newValue Text;
    time     DateTime;
}
